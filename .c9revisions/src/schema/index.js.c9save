{"ts":1364674907805,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1364674915896,"patch":[[{"diffs":[[1,"var JSV = require('JSV').JSV;\nvar env = JSV.createEnvironment();\n\nvar _schema = {\n    links: require('./link'),\n    users: require('./user'),\n    errors: require('./error'),\n    validator: env,\n    getDefaultValue: function (propertyName, schema) {\n        var properties = (schema || {}).properties || {};\n        var d = (properties[propertyName] || {})['default']; \n        return typeof d !== 'undefined' ? d : undefined;\n    },\n    getTypeValue: function (propertyName, schema) {\n        var properties = (schema || {}).properties || {};\n        var d = (properties[propertyName] || {})['type']; \n        return typeof d !== 'undefined' ? d : undefined;\n    }\n};\n\n_schema.validate = function (obj, schema, callback) {\n    for (var prop in schema.properties) {\n        var defaultValue = _schema.getDefaultValue(prop, schema);\n        var typeValue = _schema.getTypeValue(prop, schema);\n        if(!obj.hasOwnProperty(prop) && typeof defaultValue != 'undefined') {\n    \t\tobj[prop] = defaultValue;\n\t\t}\n        \n        //convert strings to integers\n        if(typeValue == \"integer\" && typeof obj[prop] == 'string') {\n            if(!isNaN(parseInt(obj[prop], 10)) && isFinite(obj[prop])) {\n                obj[prop] = parseInt(obj[prop], 10);\n                console.log(prop)\n            }\n        }\n\t}\n    var report = env.validate(obj, schema);\n    var err = report.errors && report.errors.length > 0 ? report.errors : null;\n    callback(err, obj, report);\n};\n\nexports.schema = _schema;"]],"start1":0,"start2":0,"length1":0,"length2":1493}]],"length":1493,"saved":false}
{"ts":1364675004559,"patch":[[{"diffs":[[0,"link"],[-1,"'),\n    users: require('./user'),\n    errors: require('./error"],[1,"s"],[0,"'),\n"]],"start1":104,"start2":104,"length1":70,"length2":9}]],"length":1432,"saved":false}
{"ts":1364675061249,"patch":[[{"diffs":[[0,"ment();\n"],[1,"var schemas = {\n    links: require('./links')\n};"],[0,"\nvar _sc"]],"start1":57,"start2":57,"length1":16,"length2":64}]],"length":1480,"saved":false}
{"ts":1364675064782,"patch":[[{"diffs":[[0,"= {\n"],[-1,"    links: require('./links'),\n"],[0,"    "]],"start1":126,"start2":126,"length1":39,"length2":8}]],"length":1449,"saved":false}
{"ts":1364675088559,"patch":[[{"diffs":[[0,"d;\n    }"],[1,",\n    schemas: schemas"],[0,"\n};\n\n_sc"]],"start1":612,"start2":612,"length1":16,"length2":38}]],"length":1471,"saved":false}
{"ts":1364675098996,"patch":[[{"diffs":[[0,"ks')\n};\n"],[1,"\n"],[0,"var _sch"]],"start1":106,"start2":106,"length1":16,"length2":17}]],"length":1472,"saved":false}
{"ts":1364675306570,"patch":[[{"diffs":[[0,"};\n\n"],[1,"module."],[0,"exports"],[-1,".schema"],[0," = _"]],"start1":1443,"start2":1443,"length1":22,"length2":22}]],"length":1472,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364677033260,"patch":[[{"diffs":[[1,"//work in progress\n\n"],[0,"var JSV = re"]],"start1":0,"start2":0,"length1":12,"length2":32}]],"length":1492,"saved":false}
